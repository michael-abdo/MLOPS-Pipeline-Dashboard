<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Training Progress Monitor - Feature Test</title>
    <link rel="stylesheet" href="../static/css/shared.css">
    <link rel="stylesheet" href="../static/css/dashboard.css">
    <style>
        body { 
            padding: 40px; 
            font-family: Arial, sans-serif; 
            background: var(--background-color); 
            color: var(--text-primary);
        }
        
        .test-section { 
            margin: 30px 0; 
            padding: 20px; 
            border: 2px solid var(--border-color); 
            border-radius: 8px; 
            background: white; 
        }
        
        .test-section.pass {
            border-color: var(--success-color);
            background: var(--success-light);
        }
        
        .test-controls { 
            margin: 20px 0; 
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .test-controls button { 
            padding: 8px 16px; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            font-weight: 500;
        }
        
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-success { background: var(--success-color); color: white; }
        .btn-warning { background: var(--warning-color); color: white; }
        .btn-danger { background: var(--danger-color); color: white; }
        
        .training-monitor-mock {
            background: var(--surface-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin: 20px 0;
        }
        
        .grid.grid-3 {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: var(--spacing-lg);\n        }\n        \n        .metric {\n            text-align: center;\n            padding: var(--spacing-md);\n        }\n        \n        .metric-value {\n            font-size: 2rem;\n            font-weight: 600;\n            margin-bottom: var(--spacing-sm);\n        }\n        \n        .metric-label {\n            color: var(--text-secondary);\n            font-size: 0.9rem;\n        }\n        \n        .progress-container {\n            margin: var(--spacing-lg) 0;\n        }\n        \n        .progress-bar {\n            width: 100%;\n            height: 12px;\n            background: var(--border-color);\n            border-radius: 6px;\n            overflow: hidden;\n        }\n        \n        .progress-fill {\n            height: 100%;\n            background: linear-gradient(90deg, var(--success-color), var(--primary-color));\n            transition: width 0.5s ease;\n        }\n        \n        .progress-label {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: var(--spacing-sm);\n            font-weight: 500;\n        }\n        \n        #test-log {\n            font-family: monospace;\n            font-size: 12px;\n            max-height: 300px;\n            overflow-y: auto;\n            padding: 15px;\n            background: #f8f9fa;\n            border-radius: 4px;\n            border: 1px solid #dee2e6;\n        }\n    </style>\n</head>\n<body>\n    <h1>üß† Training Progress Monitor - Feature Test</h1>\n    <p style=\"color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 30px;\">\n        Comprehensive testing of all Training Progress Monitor features and animations\n    </p>\n    \n    <!-- Mock Training Progress Monitor -->\n    <div class=\"training-monitor-mock\">\n        <h2>üß† Training Progress Monitor</h2>\n        \n        <!-- Training Stages Timeline -->\n        <div style=\"margin-bottom: var(--spacing-lg);\">\n            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);\">\n                <h4 style=\"margin: 0;\">Training Stages</h4>\n                <div style=\"text-align: right;\">\n                    <div style=\"font-size: 1.2rem; font-weight: 600;\" id=\"currentTrainingStage\">Preparing data</div>\n                    <div style=\"font-size: 0.9rem; color: var(--text-secondary);\" id=\"trainingTimeRemaining\">Estimated: 12m 30s remaining</div>\n                </div>\n            </div>\n            \n            <!-- Stages Progress Bar -->\n            <div class=\"progress-container\" style=\"margin-bottom: var(--spacing-md);\">\n                <div class=\"progress-bar\" style=\"height: 12px;\">\n                    <div class=\"progress-fill active\" id=\"stagesProgressBar\" style=\"width: 35%;\"></div>\n                </div>\n                <div style=\"margin-top: var(--spacing-sm); display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-secondary);\">\n                    <span>Start</span>\n                    <span id=\"stageProgressText\">Stage 3/8</span>\n                    <span>Complete</span>\n                </div>\n            </div>\n            \n            <!-- Training Stages List -->\n            <div id=\"trainingStagesList\" style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-sm);\">\n                <div class=\"stage-item completed\">\n                    <span class=\"stage-icon\">‚úÖ</span>\n                    <span class=\"stage-name\">Preparing data</span>\n                    <span class=\"stage-time\">1m 15s</span>\n                </div>\n                <div class=\"stage-item completed\">\n                    <span class=\"stage-icon\">‚úÖ</span>\n                    <span class=\"stage-name\">Data validation</span>\n                    <span class=\"stage-time\">1m 45s</span>\n                </div>\n                <div class=\"stage-item active\">\n                    <span class=\"stage-icon\">üîÑ</span>\n                    <span class=\"stage-name\">Feature engineering</span>\n                    <span class=\"stage-time\">2m 30s</span>\n                </div>\n                <div class=\"stage-item pending\">\n                    <span class=\"stage-icon\">‚è≥</span>\n                    <span class=\"stage-name\">Model selection</span>\n                    <span class=\"stage-time\">2m 00s</span>\n                </div>\n                <div class=\"stage-item pending\">\n                    <span class=\"stage-icon\">‚è≥</span>\n                    <span class=\"stage-name\">Training model</span>\n                    <span class=\"stage-time\">4m 30s</span>\n                </div>\n                <div class=\"stage-item pending\">\n                    <span class=\"stage-icon\">‚è≥</span>\n                    <span class=\"stage-name\">Validation</span>\n                    <span class=\"stage-time\">1m 30s</span>\n                </div>\n                <div class=\"stage-item pending\">\n                    <span class=\"stage-icon\">‚è≥</span>\n                    <span class=\"stage-name\">Optimization</span>\n                    <span class=\"stage-time\">2m 15s</span>\n                </div>\n                <div class=\"stage-item pending\">\n                    <span class=\"stage-icon\">‚è≥</span>\n                    <span class=\"stage-name\">Finalizing model</span>\n                    <span class=\"stage-time\">1m 00s</span>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Live Training Metrics -->\n        <div class=\"grid grid-3\" style=\"margin-bottom: var(--spacing-lg);\">\n            <div class=\"metric\">\n                <div class=\"metric-value\" id=\"liveTrainingAccuracy\" style=\"color: var(--primary-color);\">83.4%</div>\n                <div class=\"metric-label\">Live Accuracy</div>\n            </div>\n            <div class=\"metric\">\n                <div class=\"metric-value\" id=\"trainingElapsedTime\" style=\"color: var(--primary-color);\">3m 45s</div>\n                <div class=\"metric-label\">Elapsed Time</div>\n            </div>\n            <div class=\"metric\">\n                <div class=\"metric-value\" id=\"predictionsProcessed\" style=\"color: var(--primary-color);\">1,247</div>\n                <div class=\"metric-label\">Samples Processed</div>\n            </div>\n        </div>\n        \n        <!-- Training Status Messages -->\n        <div style=\"padding: var(--spacing-md); background: var(--background-color); border-radius: var(--radius-md); border-left: 4px solid var(--primary-color);\">\n            <div style=\"font-weight: 600; margin-bottom: var(--spacing-sm);\">Current Activity</div>\n            <div id=\"trainingStatusMessage\" style=\"color: var(--text-secondary);\">\n                Feature engineering - 35% complete ‚Ä¢ Estimated: 8m 15s remaining ‚Ä¢ Accuracy: 83.4%\n            </div>\n            <div style=\"margin-top: var(--spacing-sm); font-size: 0.9rem; color: var(--text-secondary);\">\n                Last updated: <span id=\"trainingLastUpdate\" data-timestamp=\"\">Just now</span>\n            </div>\n        </div>\n    </div>\n    \n    <!-- Test Controls -->\n    <div class=\"test-section pass\">\n        <h2>üß™ Training Stages Timeline Tests</h2>\n        <div class=\"test-controls\">\n            <button class=\"btn-primary\" onclick=\"testStageProgress(1, 'Preparing data')\">Stage 1: Preparing Data</button>\n            <button class=\"btn-primary\" onclick=\"testStageProgress(3, 'Feature engineering')\">Stage 3: Feature Engineering</button>\n            <button class=\"btn-primary\" onclick=\"testStageProgress(5, 'Training model')\">Stage 5: Training Model</button>\n            <button class=\"btn-primary\" onclick=\"testStageProgress(8, 'Finalizing model')\">Stage 8: Finalizing</button>\n            <button class=\"btn-success\" onclick=\"testTrainingCompleted()\">Training Completed</button>\n            <button class=\"btn-danger\" onclick=\"testTrainingFailed()\">Training Failed</button>\n        </div>\n    </div>\n    \n    <div class=\"test-section pass\">\n        <h2>üìä Live Training Metrics Tests</h2>\n        <div class=\"test-controls\">\n            <button class=\"btn-primary\" onclick=\"testAccuracyUpdate(85.2)\">Update Accuracy: 85.2%</button>\n            <button class=\"btn-primary\" onclick=\"testAccuracyUpdate(89.7)\">Update Accuracy: 89.7%</button>\n            <button class=\"btn-primary\" onclick=\"testPredictionsUpdate(2500)\">Update Predictions: 2,500</button>\n            <button class=\"btn-primary\" onclick=\"testPredictionsUpdate(5000)\">Update Predictions: 5,000</button>\n            <button class=\"btn-primary\" onclick=\"startElapsedTimeDemo()\">Start Elapsed Time Demo</button>\n            <button class=\"btn-warning\" onclick=\"stopElapsedTimeDemo()\">Stop Elapsed Time Demo</button>\n        </div>\n    </div>\n    \n    <div class=\"test-section pass\">\n        <h2>üí¨ Training Status Messages Tests</h2>\n        <div class=\"test-controls\">\n            <button class=\"btn-primary\" onclick=\"testStatusMessage('Feature engineering', 45, 95.2)\">Status: Feature Engineering</button>\n            <button class=\"btn-primary\" onclick=\"testStatusMessage('Training model', 75, 91.8)\">Status: Training Model</button>\n            <button class=\"btn-primary\" onclick=\"testStatusMessage('Validation', 90, 94.1)\">Status: Validation</button>\n            <button class=\"btn-primary\" onclick=\"testLastUpdateTimer()\">Test Last Update Timer</button>\n            <button class=\"btn-primary\" onclick=\"runComprehensiveTest()\">üöÄ Run Full Demo</button>\n        </div>\n    </div>\n    \n    <!-- Test Log -->\n    <div class=\"test-section\">\n        <h3>üìù Test Log</h3>\n        <div id=\"test-log\"></div>\n    </div>\n    \n    <script>\n        // Mock training functions\n        let elapsedTimer = null;\n        let lastUpdateTimer = null;\n        let trainingStartTime = Date.now();\n        \n        function log(message, type = 'info') {\n            const logEl = document.getElementById('test-log');\n            const time = new Date().toTimeString().slice(0, 8);\n            const logEntry = document.createElement('div');\n            logEntry.innerHTML = `<strong>[${time}]</strong> ${message}`;\n            logEl.appendChild(logEntry);\n            logEl.scrollTop = logEl.scrollHeight;\n        }\n        \n        function formatTrainingTime(seconds) {\n            if (seconds < 60) {\n                return `${seconds}s`;\n            } else {\n                const minutes = Math.floor(seconds / 60);\n                const remainingSeconds = seconds % 60;\n                return `${minutes}m ${remainingSeconds}s`;\n            }\n        }\n        \n        function animateCounter(element, startValue, endValue, duration) {\n            const range = endValue - startValue;\n            const startTime = Date.now();\n            \n            const updateCounter = () => {\n                const elapsed = Date.now() - startTime;\n                const progress = Math.min(elapsed / duration, 1);\n                \n                // Use easing function for smooth animation\n                const easeProgress = 1 - Math.pow(1 - progress, 3);\n                const currentValue = Math.floor(startValue + (range * easeProgress));\n                \n                element.textContent = currentValue.toLocaleString();\n                \n                if (progress < 1) {\n                    requestAnimationFrame(updateCounter);\n                }\n            };\n            \n            requestAnimationFrame(updateCounter);\n        }\n        \n        // Test Functions\n        function testStageProgress(stageIndex, stageName) {\n            log(`Testing stage progress: ${stageName} (${stageIndex}/8)`);\n            \n            // Update current stage with animation\n            const currentStageEl = document.getElementById('currentTrainingStage');\n            currentStageEl.style.transition = 'opacity 0.3s ease';\n            currentStageEl.style.opacity = '0.5';\n            \n            setTimeout(() => {\n                currentStageEl.textContent = stageName;\n                currentStageEl.style.opacity = '1';\n            }, 150);\n            \n            // Update time remaining\n            const timeRemainingEl = document.getElementById('trainingTimeRemaining');\n            const remainingTime = (8 - stageIndex) * 90; // 90 seconds per stage\n            timeRemainingEl.textContent = `Estimated: ${formatTrainingTime(remainingTime)} remaining`;\n            \n            // Update progress bar\n            const progressBar = document.getElementById('stagesProgressBar');\n            const progress = (stageIndex / 8) * 100;\n            progressBar.style.width = `${progress}%`;\n            \n            // Update progress text\n            document.getElementById('stageProgressText').textContent = `Stage ${stageIndex}/8`;\n            \n            // Update stage items\n            const stageItems = document.querySelectorAll('#trainingStagesList .stage-item');\n            stageItems.forEach((item, index) => {\n                const stageIcon = item.querySelector('.stage-icon');\n                const stageTime = item.querySelector('.stage-time');\n                \n                if (index < stageIndex - 1) {\n                    // Completed stages\n                    item.className = 'stage-item completed';\n                    stageIcon.textContent = '‚úÖ';\n                    stageTime.style.color = 'var(--success-color)';\n                } else if (index === stageIndex - 1) {\n                    // Current active stage\n                    item.className = 'stage-item active';\n                    stageIcon.style.transform = 'scale(1.2)';\n                    stageIcon.textContent = 'üîÑ';\n                    setTimeout(() => {\n                        stageIcon.style.transform = 'scale(1)';\n                    }, 200);\n                    stageTime.style.color = 'var(--primary-color)';\n                } else {\n                    // Pending stages\n                    item.className = 'stage-item pending';\n                    stageIcon.textContent = '‚è≥';\n                    stageTime.style.color = 'var(--text-secondary)';\n                }\n            });\n        }\n        \n        function testAccuracyUpdate(newAccuracy) {\n            log(`Testing accuracy update: ${newAccuracy}%`);\n            \n            const accuracyEl = document.getElementById('liveTrainingAccuracy');\n            const oldAccuracy = parseFloat(accuracyEl.textContent) || 0;\n            \n            // Add trend indicator\n            let trendIcon = '';\n            if (newAccuracy > oldAccuracy) {\n                trendIcon = ' <span style=\"color: var(--success-color); font-size: 0.8em;\">‚ÜóÔ∏è</span>';\n            } else if (newAccuracy < oldAccuracy) {\n                trendIcon = ' <span style=\"color: var(--warning-color); font-size: 0.8em;\">‚ÜòÔ∏è</span>';\n            }\n            \n            // Animate accuracy change\n            accuracyEl.style.transition = 'all 0.3s ease';\n            accuracyEl.style.transform = 'scale(1.1)';\n            accuracyEl.style.color = 'var(--success-color)';\n            \n            setTimeout(() => {\n                accuracyEl.innerHTML = `${newAccuracy}%${trendIcon}`;\n                accuracyEl.style.transform = 'scale(1)';\n                accuracyEl.style.color = 'var(--primary-color)';\n            }, 150);\n        }\n        \n        function testPredictionsUpdate(newCount) {\n            log(`Testing predictions update: ${newCount.toLocaleString()}`);\n            \n            const predictionsEl = document.getElementById('predictionsProcessed');\n            const oldCount = parseInt(predictionsEl.textContent.replace(/,/g, '')) || 0;\n            \n            // Animate counter increment\n            animateCounter(predictionsEl, oldCount, newCount, 1500);\n        }\n        \n        function startElapsedTimeDemo() {\n            log('Starting elapsed time demo (updates every second)');\n            \n            if (elapsedTimer) clearInterval(elapsedTimer);\n            \n            trainingStartTime = Date.now();\n            elapsedTimer = setInterval(() => {\n                const elapsed = Math.floor((Date.now() - trainingStartTime) / 1000);\n                const elapsedEl = document.getElementById('trainingElapsedTime');\n                elapsedEl.textContent = formatTrainingTime(elapsed);\n            }, 1000);\n        }\n        \n        function stopElapsedTimeDemo() {\n            log('Stopping elapsed time demo');\n            if (elapsedTimer) {\n                clearInterval(elapsedTimer);\n                elapsedTimer = null;\n            }\n        }\n        \n        function testStatusMessage(stageName, progress, accuracy) {\n            log(`Testing status message: ${stageName} - ${progress}%`);\n            \n            const statusMsgEl = document.getElementById('trainingStatusMessage');\n            const estimatedTime = Math.floor((100 - progress) * 2); // 2 seconds per percent\n            \n            statusMsgEl.textContent = `${stageName} - ${progress}% complete ‚Ä¢ Estimated: ${formatTrainingTime(estimatedTime)} remaining ‚Ä¢ Accuracy: ${accuracy}%`;\n            \n            // Update last update timestamp\n            const lastUpdateEl = document.getElementById('trainingLastUpdate');\n            lastUpdateEl.textContent = 'Just now';\n            lastUpdateEl.setAttribute('data-timestamp', Date.now());\n        }\n        \n        function testLastUpdateTimer() {\n            log('Testing last update timer (updates every 5 seconds)');\n            \n            if (lastUpdateTimer) clearInterval(lastUpdateTimer);\n            \n            lastUpdateTimer = setInterval(() => {\n                const lastUpdateEl = document.getElementById('trainingLastUpdate');\n                const timestamp = parseInt(lastUpdateEl.getAttribute('data-timestamp') || '0');\n                \n                if (timestamp) {\n                    const secondsAgo = Math.floor((Date.now() - timestamp) / 1000);\n                    if (secondsAgo < 60) {\n                        lastUpdateEl.textContent = secondsAgo <= 5 ? 'Just now' : `${secondsAgo} seconds ago`;\n                    } else {\n                        const minutesAgo = Math.floor(secondsAgo / 60);\n                        lastUpdateEl.textContent = `${minutesAgo} minute${minutesAgo > 1 ? 's' : ''} ago`;\n                    }\n                }\n            }, 5000);\n        }\n        \n        function testTrainingCompleted() {\n            log('Testing training completion state');\n            \n            // Complete all stages\n            testStageProgress(8, 'Training completed');\n            \n            // Update final metrics\n            testAccuracyUpdate(96.8);\n            \n            // Update status message\n            const statusMsgEl = document.getElementById('trainingStatusMessage');\n            statusMsgEl.innerHTML = `\n                <span style=\"color: var(--success-color); font-weight: 600;\">‚úÖ Training Completed Successfully!</span><br>\n                Final accuracy: 96.8% ‚Ä¢ Training time: 12m 45s ‚Ä¢ Model ready for deployment\n            `;\n            \n            // Mark all stages as completed\n            document.querySelectorAll('.stage-item').forEach(item => {\n                item.className = 'stage-item completed';\n                item.querySelector('.stage-icon').textContent = '‚úÖ';\n            });\n        }\n        \n        function testTrainingFailed() {\n            log('Testing training failure state');\n            \n            // Update status message\n            const statusMsgEl = document.getElementById('trainingStatusMessage');\n            statusMsgEl.innerHTML = `\n                <span style=\"color: var(--danger-color); font-weight: 600;\">‚ùå Training Failed</span><br>\n                <span style=\"color: var(--text-secondary);\">Insufficient memory available for training</span><br>\n                <button class=\"btn btn-sm btn-primary\" style=\"margin-top: 8px;\">üîÑ Retry Training</button>\n            `;\n            \n            // Mark current stage as failed\n            const activeStage = document.querySelector('.stage-item.active');\n            if (activeStage) {\n                activeStage.className = 'stage-item failed';\n                activeStage.querySelector('.stage-icon').textContent = '‚ùå';\n                activeStage.style.backgroundColor = 'var(--danger-light)';\n            }\n        }\n        \n        function runComprehensiveTest() {\n            log('üöÄ Starting comprehensive training progress demo...');\n            \n            const stages = [\n                { index: 1, name: 'Preparing data' },\n                { index: 2, name: 'Data validation' },\n                { index: 3, name: 'Feature engineering' },\n                { index: 4, name: 'Model selection' },\n                { index: 5, name: 'Training model' },\n                { index: 6, name: 'Validation' },\n                { index: 7, name: 'Optimization' },\n                { index: 8, name: 'Finalizing model' }\n            ];\n            \n            const accuracyValues = [45.2, 62.8, 75.1, 83.4, 89.7, 92.3, 94.8, 96.8];\n            const predictionValues = [500, 1000, 1500, 2000, 3000, 4000, 4500, 5000];\n            \n            stages.forEach((stage, index) => {\n                setTimeout(() => {\n                    testStageProgress(stage.index, stage.name);\n                    testAccuracyUpdate(accuracyValues[index]);\n                    testPredictionsUpdate(predictionValues[index]);\n                    testStatusMessage(stage.name, (stage.index / 8) * 100, accuracyValues[index]);\n                    \n                    if (index === stages.length - 1) {\n                        setTimeout(() => {\n                            testTrainingCompleted();\n                            log('‚úÖ Comprehensive demo completed!');\n                        }, 1000);\n                    }\n                }, index * 2000);\n            });\n            \n            // Start timers\n            startElapsedTimeDemo();\n            testLastUpdateTimer();\n        }\n        \n        // Initialize\n        log('üß† Training Progress Monitor test interface ready');\n        log('‚ú® All features available for testing');\n    </script>\n</body>\n</html>