<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitoring - ML Pipeline</title>
    <link rel="stylesheet" href="/static/css/shared.css">
    <link rel="stylesheet" href="/static/css/monitoring.css">
</head>
<body>
    <!-- Navigation will be rendered by JavaScript component -->
    <nav class="main-nav" id="main-nav"></nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">System Monitoring</h1>
            <p class="page-subtitle">Monitor system performance, resources, and health</p>
        </div>

        <!-- System Overview -->
        <div class="card">
            <h3 style="margin-bottom: var(--spacing-lg);">üñ•Ô∏è System Overview</h3>
            
            <div class="grid grid-4">
                <div class="metric">
                    <div class="metric-value" id="systemUptime">99.8%</div>
                    <div class="metric-label">System Uptime</div>
                    <div class="metric-trend positive">+0.2%</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="cpuUsage">34%</div>
                    <div class="metric-label">CPU Usage</div>
                    <div class="metric-trend negative">+5%</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="memoryUsage">2.1GB</div>
                    <div class="metric-label">Memory Usage</div>
                    <div class="metric-trend positive">-0.3GB</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="diskUsage">45%</div>
                    <div class="metric-label">Disk Usage</div>
                    <div class="metric-trend positive">-2%</div>
                </div>
            </div>
        </div>

        <!-- Real-time Charts -->
        <div class="grid grid-2">
            <div class="card">
                <h4>üìä CPU & Memory Usage</h4>
                <div class="chart-container">
                    <canvas id="resourceChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--primary-color);"></div>
                        <span>CPU Usage</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--success-color);"></div>
                        <span>Memory Usage</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h4>üåê Network Activity</h4>
                <div class="chart-container">
                    <canvas id="networkChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--warning-color);"></div>
                        <span>Incoming</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--danger-color);"></div>
                        <span>Outgoing</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Service Health -->
        <div class="card">
            <h3 style="margin-bottom: var(--spacing-lg);">üîß Service Health</h3>
            
            <div class="service-grid">
                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">üöÄ</div>
                        <div class="service-info">
                            <h4>FastAPI Server</h4>
                            <p>Main application server</p>
                        </div>
                        <div class="service-status">
                            <div class="status-dot status-good"></div>
                            <span class="status-text">Healthy</span>
                        </div>
                    </div>
                    <div class="service-metrics">
                        <div class="service-metric">
                            <span class="metric-label">Response Time:</span>
                            <span class="metric-value">23ms</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Requests/min:</span>
                            <span class="metric-value">142</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Error Rate:</span>
                            <span class="metric-value">0.1%</span>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">üîå</div>
                        <div class="service-info">
                            <h4>WebSocket Server</h4>
                            <p>Real-time communication</p>
                        </div>
                        <div class="service-status">
                            <div class="status-dot status-good"></div>
                            <span class="status-text">Connected</span>
                        </div>
                    </div>
                    <div class="service-metrics">
                        <div class="service-metric">
                            <span class="metric-label">Active Connections:</span>
                            <span class="metric-value">3</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Messages/sec:</span>
                            <span class="metric-value">8</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Latency:</span>
                            <span class="metric-value">12ms</span>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">üß†</div>
                        <div class="service-info">
                            <h4>ML Engine</h4>
                            <p>Machine learning processing</p>
                        </div>
                        <div class="service-status">
                            <div class="status-dot status-good"></div>
                            <span class="status-text">Ready</span>
                        </div>
                    </div>
                    <div class="service-metrics">
                        <div class="service-metric">
                            <span class="metric-label">Models Loaded:</span>
                            <span class="metric-value">2</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Queue Size:</span>
                            <span class="metric-value">0</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Avg Processing:</span>
                            <span class="metric-value">1.2s</span>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-header">
                        <div class="service-icon">üíæ</div>
                        <div class="service-info">
                            <h4>Storage System</h4>
                            <p>File and data storage</p>
                        </div>
                        <div class="service-status">
                            <div class="status-dot status-warning"></div>
                            <span class="status-text">Warning</span>
                        </div>
                    </div>
                    <div class="service-metrics">
                        <div class="service-metric">
                            <span class="metric-label">Free Space:</span>
                            <span class="metric-value">156GB</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Read Speed:</span>
                            <span class="metric-value">450MB/s</span>
                        </div>
                        <div class="service-metric">
                            <span class="metric-label">Write Speed:</span>
                            <span class="metric-value">320MB/s</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="card">
            <h3 style="margin-bottom: var(--spacing-lg);">‚ö° Performance Metrics</h3>
            
            <div class="performance-grid">
                <div class="performance-category">
                    <h4>üìà Training Performance</h4>
                    <div class="performance-metrics">
                        <div class="performance-item">
                            <div class="performance-icon">üéØ</div>
                            <div class="performance-info">
                                <div class="performance-label">Average Training Time</div>
                                <div class="performance-value">14.2 seconds</div>
                                <div class="performance-change positive">-2.1s from last week</div>
                            </div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-icon">üìä</div>
                            <div class="performance-info">
                                <div class="performance-label">Model Accuracy</div>
                                <div class="performance-value">94.7%</div>
                                <div class="performance-change positive">+1.2% from last week</div>
                            </div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-icon">‚ö°</div>
                            <div class="performance-info">
                                <div class="performance-label">Inference Speed</div>
                                <div class="performance-value">45ms</div>
                                <div class="performance-change negative">+5ms from last week</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="performance-category">
                    <h4>üîÑ Pipeline Performance</h4>
                    <div class="performance-metrics">
                        <div class="performance-item">
                            <div class="performance-icon">‚úÖ</div>
                            <div class="performance-info">
                                <div class="performance-label">Success Rate</div>
                                <div class="performance-value">97.3%</div>
                                <div class="performance-change positive">+0.8% from last week</div>
                            </div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-icon">üïí</div>
                            <div class="performance-info">
                                <div class="performance-label">Average Duration</div>
                                <div class="performance-value">8m 42s</div>
                                <div class="performance-change negative">+1.2m from last week</div>
                            </div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-icon">üîß</div>
                            <div class="performance-info">
                                <div class="performance-label">Queue Wait Time</div>
                                <div class="performance-value">23s</div>
                                <div class="performance-change positive">-12s from last week</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Alerts -->
        <div class="card">
            <div class="card-header">
                <h3>üö® System Alerts</h3>
                <div class="card-actions">
                    <button class="btn btn-secondary" id="clearAlertsBtn">Clear All</button>
                    <button class="btn btn-primary" id="configureAlertsBtn">Configure</button>
                </div>
            </div>
            
            <div class="alerts-list">
                <div class="alert-item warning">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-info">
                        <h4>Storage Space Warning</h4>
                        <p>Disk usage has exceeded 80% threshold. Consider cleaning up old data or expanding storage.</p>
                        <div class="alert-meta">
                            <span>Priority: Medium</span>
                            <span>Triggered: 2 hours ago</span>
                        </div>
                    </div>
                    <div class="alert-actions">
                        <button class="btn btn-secondary">Acknowledge</button>
                        <button class="btn btn-primary">View Details</button>
                    </div>
                </div>

                <div class="alert-item info">
                    <div class="alert-icon">‚ÑπÔ∏è</div>
                    <div class="alert-info">
                        <h4>Model Performance Improvement</h4>
                        <p>Latest model training achieved 94.7% accuracy, a 1.2% improvement over previous version.</p>
                        <div class="alert-meta">
                            <span>Priority: Low</span>
                            <span>Triggered: 4 hours ago</span>
                        </div>
                    </div>
                    <div class="alert-actions">
                        <button class="btn btn-secondary">Dismiss</button>
                        <button class="btn btn-primary">View Model</button>
                    </div>
                </div>

                <div class="alert-item success">
                    <div class="alert-icon">‚úÖ</div>
                    <div class="alert-info">
                        <h4>System Health Check Passed</h4>
                        <p>All system components are functioning normally. No issues detected in the last 24 hours.</p>
                        <div class="alert-meta">
                            <span>Priority: Low</span>
                            <span>Triggered: 6 hours ago</span>
                        </div>
                    </div>
                    <div class="alert-actions">
                        <button class="btn btn-secondary">Dismiss</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Feed -->
        <div class="card">
            <h3 style="margin-bottom: var(--spacing-lg);">üîç System Activity</h3>
            <div id="activityFeed" style="max-height: 300px; overflow-y: auto;">
                <!-- Activities will be loaded from backend -->
            </div>
        </div>
    </div>

    <!-- Import JavaScript modules -->
    <script type="module" src="/static/js/components/navigation.js"></script>
    <script type="module" src="/static/js/pages/monitoring.js"></script>

</body>
</html>
